{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es7.object.entries.js","webpack:///./node_modules/core-js/modules/_string-ws.js","webpack:///./node_modules/core-js/modules/_array-fill.js","webpack:///./src/components/board.tsx","webpack:///./src/hooks/tetriminos.ts","webpack:///./src/hooks/movement.ts","webpack:///./src/hooks/coordinates.ts","webpack:///./src/hooks/tetris.ts","webpack:///./src/pages/index.tsx","webpack:///./node_modules/core-js/modules/_object-to-array.js","webpack:///./node_modules/core-js/modules/es6.array.fill.js","webpack:///./node_modules/core-js/modules/_string-trim.js","webpack:///./node_modules/core-js/modules/es6.number.constructor.js"],"names":["$export","$entries","S","entries","it","module","exports","toObject","toAbsoluteIndex","toLength","value","O","this","length","aLen","arguments","index","undefined","end","endPos","Point","color","style","height","width","border","backgroundColor","Board","props","Array","dimensions","fill","map","_","key","__","points","String","i","coordinates","j","l","o","s","z","t","getRandomTetriminos","tetriminos","JSON","parse","stringify","Math","floor","random","shiftCoordinate","coordinate","shift","shiftCoordinates","positionTetrimino","tetrimino","brickPosition","tetriminoToCoords","reduce","dict","useTetris","useState","activeTetrimino","setActiveTetrimino","nextTetrimino","setNextTetrimino","replaceCurrentTetrimino","useCallback","useTetriminos","setBrickPosition","stationaryBrickCoordinates","setStationaryBrickCoordinates","stationaryBrickCoordinateIndex","setStationaryBrickCoordinateIndex","allCoordinates","setAllCoordinates","reset","useEffect","addStationaryCoordinates","cb","boardWidth","newCoordinateDict","newCoordinateIndex","forEach","posY","posX","rowsToRemove","filter","self","indexOf","row","Object","keys","Number","column","useCoordinates","coordinatesDict","willCollide","every","isClearLeft","isClearRight","isClearTop","isClearBottom","isClearEnvironment","positionedTetrimino","console","log","rotate","remapFunc","rotatedTetrimino","rotateClockwise","rotateCounterClockwise","moveLeft","moveRight","moveDown","down","event","left","right","clockwise","counterClockwise","window","addEventListener","removeEventListener","useMovement","gotoDefaultBrickPosition","getNextTetrimino","gameTimer","setInterval","clearInterval","IndexPage","setDimensions","htmlFor","type","onChange","target","onClick","DESCRIPTORS","getKeys","toIObject","isEnum","f","isEntries","result","call","push","P","defined","fails","spaces","space","ltrim","RegExp","rtrim","exporter","KEY","exec","ALIAS","exp","FORCE","fn","trim","F","string","TYPE","replace","global","has","cof","inheritIfRequired","toPrimitive","gOPN","gOPD","dP","$trim","$Number","Base","proto","prototype","BROKEN_COF","TRIM","toNumber","argument","third","radix","maxCode","first","charCodeAt","NaN","code","digits","slice","parseInt","that","valueOf","split","constructor"],"mappings":"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","file":"component---src-pages-index-tsx-42dc509882975c1f23ea.js","sourcesContent":["// https://github.com/tc39/proposal-object-values-entries\nvar $export = require('./_export');\nvar $entries = require('./_object-to-array')(true);\n\n$export($export.S, 'Object', {\n  entries: function entries(it) {\n    return $entries(it);\n  }\n});\n","module.exports = '\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003' +\n  '\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF';\n","// 22.1.3.6 Array.prototype.fill(value, start = 0, end = this.length)\n'use strict';\nvar toObject = require('./_to-object');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nvar toLength = require('./_to-length');\nmodule.exports = function fill(value /* , start = 0, end = @length */) {\n  var O = toObject(this);\n  var length = toLength(O.length);\n  var aLen = arguments.length;\n  var index = toAbsoluteIndex(aLen > 1 ? arguments[1] : undefined, length);\n  var end = aLen > 2 ? arguments[2] : undefined;\n  var endPos = end === undefined ? length : toAbsoluteIndex(end, length);\n  while (endPos > index) O[index++] = value;\n  return O;\n};\n","import React from \"react\"\n\nconst Point: React.FC<{ color?: string }> = ({ color }) => {\n  return (\n    <td\n      style={{\n        height: \"20px\",\n        width: \"20px\",\n        border: \"1px solid black\",\n        backgroundColor: color,\n      }}\n    ></td>\n  )\n}\n\nexport const Board: React.FC<{\n  dimensions: [number, number]\n  points: { [posYPosX: string]: string }\n}> = props => (\n  <table>\n    <tbody>\n      {new Array(props.dimensions[0]).fill(undefined).map((_, height) => (\n        <tr key={`board-row-${height}`}>\n          {new Array(props.dimensions[1]).fill(undefined).map((__, width) => (\n            <Point\n              key={`board-row-${height}-pos-${width}`}\n              color={props.points[String([height, width])]}\n            />\n          ))}\n        </tr>\n      ))}\n    </tbody>\n  </table>\n)\n","import { Coordinate, Dimensions } from \"../types\"\nimport { useState, useCallback, useEffect } from \"react\"\n\nexport interface ITetrimino {\n  coordinates: Coordinate[]\n  color: string\n}\n\nconst i: ITetrimino = {\n  coordinates: [\n    [0, -1],\n    [0, 0],\n    [0, 1],\n    [0, 2],\n  ],\n  color: \"#00F0F0\",\n}\nconst j: ITetrimino = {\n  coordinates: [\n    [1, -1],\n    [0, -1],\n    [0, 0],\n    [0, 1],\n  ],\n  color: \"#0000F0\",\n}\n\nconst l: ITetrimino = {\n  coordinates: [\n    [0, -1],\n    [0, 0],\n    [0, 1],\n    [1, 1],\n  ],\n  color: \"#F0A000\",\n}\nconst o: ITetrimino = {\n  coordinates: [\n    [0, 0],\n    [0, 1],\n    [-1, 0],\n    [-1, 1],\n  ],\n  color: \"#F0F000\",\n}\n\nconst s: ITetrimino = {\n  coordinates: [\n    [0, -1],\n    [0, 0],\n    [1, 0],\n    [1, 1],\n  ],\n  color: \"#00F000\",\n}\n\nconst z: ITetrimino = {\n  coordinates: [\n    [1, -1],\n    [1, 0],\n    [0, 0],\n    [0, 1],\n  ],\n  color: \"#F00000\",\n}\n\nconst t: ITetrimino = {\n  coordinates: [\n    [0, -1],\n    [0, 0],\n    [1, 0],\n    [-1, 0],\n  ],\n  color: \"#A000F0\",\n}\n\nconst getRandomTetriminos = () => {\n  const tetriminos = [t, z, s, l, j, i, o]\n  return JSON.parse(\n    JSON.stringify(tetriminos[Math.floor(Math.random() * tetriminos.length)])\n  ) as ITetrimino\n}\n\nexport const useTetriminos = (dimensions: Dimensions) => {\n  const [activeTetrimino, setActiveTetrimino] = useState(getRandomTetriminos())\n  const [nextTetrimino, setNextTetrimino] = useState(getRandomTetriminos())\n\n  const replaceCurrentTetrimino = useCallback(() => {\n    setActiveTetrimino(nextTetrimino)\n    setNextTetrimino(getRandomTetriminos())\n  }, [nextTetrimino])\n\n  return {\n    replaceCurrentTetrimino,\n    setActiveTetrimino,\n    activeTetrimino,\n    nextTetrimino,\n  }\n}\n","import { useCallback, useEffect } from \"react\"\nimport { ITetrimino } from \"./tetriminos\"\nimport { Dimensions, CoordinateDictionary, Coordinate } from \"../types\"\n\nexport const shiftCoordinate = (\n  coordinate: Coordinate,\n  shift: Coordinate\n): Coordinate => [coordinate[0] + shift[0], coordinate[1] + shift[1]]\n\nexport const shiftCoordinates = (\n  coordinates: Coordinate[],\n  shift: Coordinate\n): Coordinate[] => {\n  return coordinates.map(coordinate => {\n    return shiftCoordinate(coordinate, shift)\n  })\n}\n\nexport const positionTetrimino = (\n  tetrimino: ITetrimino,\n  brickPosition: Coordinate\n) => {\n  return {\n    ...tetrimino,\n    coordinates: shiftCoordinates(tetrimino.coordinates, brickPosition),\n  }\n}\n\nexport const useMovement = (\n  tetrimino: ITetrimino,\n  setActiveTetrimino: React.Dispatch<React.SetStateAction<ITetrimino>>,\n  brickPosition: Coordinate,\n  setBrickPosition: React.Dispatch<React.SetStateAction<[number, number]>>,\n  dimensions: Dimensions,\n  coordinatesDict: CoordinateDictionary\n) => {\n  const willCollide = useCallback(\n    (coordinates: Coordinate[]) => {\n      return coordinates.every(([posY, posX]) => {\n        const isClearLeft = 0 <= posX\n        const isClearRight = posX < dimensions[1]\n        const isClearTop = 0 <= posY\n        const isClearBottom = posY < dimensions[0]\n        const isClearEnvironment = !coordinatesDict[String([posY, posX])]\n        return (\n          isClearLeft &&\n          isClearRight &&\n          isClearTop &&\n          isClearBottom &&\n          isClearEnvironment\n        )\n      })\n    },\n    [dimensions, coordinatesDict]\n  )\n\n  const shift = useCallback(\n    (shift: Coordinate, cb?: Function) => {\n      const positionedTetrimino = positionTetrimino(tetrimino, brickPosition)\n      console.log(positionedTetrimino.coordinates)\n\n      if (\n        willCollide(shiftCoordinates(positionedTetrimino.coordinates, shift))\n      ) {\n        setBrickPosition(shiftCoordinate(brickPosition, shift))\n      } else {\n        if (cb) cb()\n      }\n    },\n    [tetrimino, dimensions, coordinatesDict, brickPosition]\n  )\n\n  const rotate = useCallback(\n    (remapFunc: (Coordinate) => Coordinate) => {\n      const rotatedTetrimino: ITetrimino = {\n        ...tetrimino,\n        coordinates: tetrimino.coordinates.map(remapFunc),\n      }\n      const positionedTetrimino = positionTetrimino(\n        rotatedTetrimino,\n        brickPosition\n      )\n\n      if (!willCollide(positionedTetrimino.coordinates)) {\n        if (\n          willCollide(shiftCoordinates(positionedTetrimino.coordinates, [0, 1]))\n        ) {\n          shift([0, 1])\n          setActiveTetrimino(rotatedTetrimino)\n        }\n\n        if (\n          willCollide(\n            shiftCoordinates(positionedTetrimino.coordinates, [0, -1])\n          )\n        ) {\n          shift([0, -1])\n          setActiveTetrimino(rotatedTetrimino)\n        }\n      } else setActiveTetrimino(rotatedTetrimino)\n    },\n    [tetrimino, brickPosition]\n  )\n\n  const rotateClockwise = useCallback(() => {\n    rotate(([posY, posX]) => [posX, -posY])\n  }, [rotate])\n\n  const rotateCounterClockwise = useCallback(() => {\n    rotate(([posY, posX]) => [-posX, posY])\n  }, [rotate])\n\n  const moveLeft = useCallback(() => {\n    return shift([0, -1])\n  }, [shift])\n\n  const moveRight = useCallback(() => {\n    return shift([0, 1])\n  }, [shift])\n\n  const moveDown = useCallback(\n    (cb?: Function) => {\n      return shift([1, 0], cb)\n    },\n    [shift]\n  )\n\n  useEffect(() => {\n    const down = event => (event.key === \"ArrowDown\" ? moveDown() : null)\n    const left = event => (event.key === \"ArrowLeft\" ? moveLeft() : null)\n    const right = event => (event.key === \"ArrowRight\" ? moveRight() : null)\n    const clockwise = event => (event.key === \"w\" ? rotateClockwise() : null)\n    const counterClockwise = event =>\n      event.key === \"q\" ? rotateCounterClockwise() : null\n    window.addEventListener(\"keydown\", down)\n    window.addEventListener(\"keydown\", left)\n    window.addEventListener(\"keydown\", right)\n    window.addEventListener(\"keydown\", clockwise)\n    window.addEventListener(\"keydown\", counterClockwise)\n\n    return () => {\n      window.removeEventListener(\"keydown\", down)\n      window.removeEventListener(\"keydown\", left)\n      window.removeEventListener(\"keydown\", right)\n      window.removeEventListener(\"keydown\", clockwise)\n      window.removeEventListener(\"keydown\", counterClockwise)\n    }\n  }, [moveDown, moveLeft, moveRight, rotateClockwise, rotateCounterClockwise])\n\n  return {\n    rotateClockwise,\n    rotateCounterClockwise,\n    moveLeft,\n    moveRight,\n    moveDown,\n  }\n}\n","import { useState, useEffect, useCallback } from \"react\"\nimport { ITetrimino } from \"./tetriminos\"\nimport {\n  Dimensions,\n  CoordinateDictionary,\n  CoordinateIndex,\n  Coordinate,\n} from \"../types\"\nimport { positionTetrimino } from \"./movement\"\n\nconst tetriminoToCoords = (tetrimino: ITetrimino) =>\n  tetrimino.coordinates.reduce((dict, coordinate) => {\n    dict[String(coordinate)] = tetrimino.color\n    return dict\n  }, {} as CoordinateDictionary)\n\nexport const useCoordinates = (\n  activeTetrimino: ITetrimino,\n  brickPosition: Coordinate,\n  dimensions: Dimensions\n  // tetriminoPosition: Coordinate\n) => {\n  const [stationaryBrickCoordinates, setStationaryBrickCoordinates] = useState<\n    CoordinateDictionary\n  >({\n    \"15,0\": \"red\",\n    \"15,1\": \"red\",\n    \"15,2\": \"red\",\n  })\n  const [\n    stationaryBrickCoordinateIndex,\n    setStationaryBrickCoordinateIndex,\n  ] = useState<CoordinateIndex>({ \"15\": { \"0\": true, \"1\": true, \"2\": true } })\n\n  const [allCoordinates, setAllCoordinates] = useState<CoordinateDictionary>({})\n\n  const reset = useCallback(() => {\n    setStationaryBrickCoordinates({})\n    setStationaryBrickCoordinateIndex({})\n  }, [])\n\n  useEffect(() => {\n    const tetrimino = positionTetrimino(activeTetrimino, brickPosition)\n\n    setAllCoordinates({\n      ...stationaryBrickCoordinates,\n      ...tetriminoToCoords(tetrimino),\n    })\n  }, [activeTetrimino, stationaryBrickCoordinates, brickPosition])\n\n  const addStationaryCoordinates = useCallback(\n    (cb: Function) => {\n      const tetrimino = positionTetrimino(activeTetrimino, brickPosition)\n      const boardWidth = dimensions[1]\n\n      const newCoordinateDict = {\n        ...stationaryBrickCoordinates,\n        ...tetriminoToCoords(tetrimino),\n      }\n      const newCoordinateIndex = { ...stationaryBrickCoordinateIndex }\n\n      tetrimino.coordinates.forEach(([posY, posX]) => {\n        if (!newCoordinateIndex[posY]) {\n          newCoordinateIndex[posY] = {}\n        }\n        newCoordinateIndex[posY][posX] = true\n      })\n\n      const affectedRows = tetrimino.coordinates\n        .map(coordinate => coordinate[0])\n        .filter((value, index, self) => {\n          return self.indexOf(value) === index\n        })\n\n      const rowsToRemove = affectedRows.filter(\n        row => Object.keys(newCoordinateIndex[row]).length >= boardWidth\n      )\n      // delete coordinates and indexes\n      rowsToRemove.forEach(posY => {\n        Object.keys(newCoordinateIndex[posY]).forEach(posX => {\n          delete newCoordinateDict[String([posY, Number(posX)])]\n        })\n        delete newCoordinateIndex[posY]\n\n        for (let row = posY - 1; row >= 0; --row) {\n          // update Dictionary\n          Object.entries(newCoordinateIndex[row] || {}).forEach(([column]) => {\n            newCoordinateDict[String([row + 1, column])] =\n              newCoordinateDict[String([row, column])]\n            delete newCoordinateDict[String([row, column])]\n          })\n          // shift indexes\n          newCoordinateIndex[Number(row) + 1] = newCoordinateIndex[row]\n          delete newCoordinateIndex[row]\n        }\n      })\n\n      setStationaryBrickCoordinates(newCoordinateDict)\n      setStationaryBrickCoordinateIndex(newCoordinateIndex)\n\n      cb()\n      return rowsToRemove.length\n    },\n    [\n      stationaryBrickCoordinates,\n      stationaryBrickCoordinateIndex,\n      activeTetrimino,\n      brickPosition,\n    ]\n  )\n\n  return {\n    reset,\n    allCoordinates,\n    addStationaryCoordinates,\n    stationaryBrickCoordinates,\n  }\n}\n","import React, { useState, useEffect, useCallback } from \"react\"\n\nimport { useTetriminos, ITetrimino } from \"../hooks/tetriminos\"\nimport { Coordinate } from \"../types\"\nimport { useCoordinates } from \"../hooks/coordinates\"\nimport { useMovement, shiftCoordinate } from \"../hooks/movement\"\n\nexport const useTetris = (dimensions: [number, number]) => {\n  const {\n    activeTetrimino,\n    setActiveTetrimino,\n    nextTetrimino,\n    replaceCurrentTetrimino,\n  } = useTetriminos(dimensions)\n\n  const [brickPosition, setBrickPosition] = useState<Coordinate>([\n    1,\n    Math.floor(dimensions[1] / 2 + 1),\n  ])\n\n  const {\n    allCoordinates,\n    reset,\n    stationaryBrickCoordinates,\n    addStationaryCoordinates,\n  } = useCoordinates(activeTetrimino, brickPosition, dimensions)\n\n  const {\n    moveDown,\n    moveLeft,\n    moveRight,\n    rotateClockwise,\n    rotateCounterClockwise,\n  } = useMovement(\n    activeTetrimino,\n    setActiveTetrimino,\n    brickPosition,\n    setBrickPosition,\n    dimensions,\n    stationaryBrickCoordinates\n  )\n\n  const gotoDefaultBrickPosition = useCallback(() => {\n    setBrickPosition([1, Math.floor(dimensions[1] / 2 + 1)])\n  }, [])\n\n  const getNextTetrimino = useCallback(\n    () =>\n      addStationaryCoordinates(() => {\n        replaceCurrentTetrimino()\n        gotoDefaultBrickPosition()\n      }),\n    [addStationaryCoordinates, replaceCurrentTetrimino]\n  )\n\n  useEffect(() => {\n    const gameTimer = setInterval(() => {\n      moveDown(getNextTetrimino)\n      // setBrickPosition(shiftCoordinate(brickPosition, [1, 0]))\n    }, 800)\n    return () => {\n      clearInterval(gameTimer)\n    }\n  }, [brickPosition, getNextTetrimino])\n\n  return {\n    dimensions,\n    activeTetrimino,\n    nextTetrimino,\n    replaceCurrentTetrimino,\n    allCoordinates,\n    setBrickPosition,\n    addStationaryCoordinates,\n    moveLeft,\n    moveRight,\n    moveDown,\n    reset,\n    rotateClockwise,\n    rotateCounterClockwise,\n  }\n}\n","import React, { useState, useEffect, useCallback } from \"react\"\n\nimport { Board } from \"../components/board\"\nimport { useTetris } from \"../hooks/tetris\"\nimport { Coordinate } from \"../types\"\n\nconst IndexPage = () => {\n  const [dimensions, setDimensions] = useState<Coordinate>([16, 10])\n\n  const {\n    allCoordinates,\n    nextTetrimino,\n    activeTetrimino,\n    setBrickPosition,\n    rotateClockwise,\n    moveLeft,\n    reset,\n    moveRight,\n    moveDown,\n    rotateCounterClockwise,\n    replaceCurrentTetrimino,\n    addStationaryCoordinates, // for testing\n  } = useTetris(dimensions)\n\n  const setBrickCallback = useCallback(() => {\n    replaceCurrentTetrimino()\n    setBrickPosition([1, Math.floor(dimensions[1] / 2 + 1)])\n  }, [])\n\n\n  return (\n    <div>\n      <Board dimensions={dimensions} points={allCoordinates} />\n      <label htmlFor=\"\">Height</label>\n      <input\n        type=\"number\"\n        value={dimensions[0]}\n        onChange={event =>\n          setDimensions([Number(event.target.value), dimensions[1]])\n        }\n      />\n      <label htmlFor=\"\">width</label>\n      <input\n        type=\"number\"\n        value={dimensions[1]}\n        onChange={event =>\n          setDimensions([dimensions[0], Number(event.target.value)])\n        }\n      />\n      <br />\n      <button onClick={reset}>Reset</button>\n    </div>\n  )\n}\n\nexport default IndexPage\n","var DESCRIPTORS = require('./_descriptors');\nvar getKeys = require('./_object-keys');\nvar toIObject = require('./_to-iobject');\nvar isEnum = require('./_object-pie').f;\nmodule.exports = function (isEntries) {\n  return function (it) {\n    var O = toIObject(it);\n    var keys = getKeys(O);\n    var length = keys.length;\n    var i = 0;\n    var result = [];\n    var key;\n    while (length > i) {\n      key = keys[i++];\n      if (!DESCRIPTORS || isEnum.call(O, key)) {\n        result.push(isEntries ? [key, O[key]] : O[key]);\n      }\n    }\n    return result;\n  };\n};\n","// 22.1.3.6 Array.prototype.fill(value, start = 0, end = this.length)\nvar $export = require('./_export');\n\n$export($export.P, 'Array', { fill: require('./_array-fill') });\n\nrequire('./_add-to-unscopables')('fill');\n","var $export = require('./_export');\nvar defined = require('./_defined');\nvar fails = require('./_fails');\nvar spaces = require('./_string-ws');\nvar space = '[' + spaces + ']';\nvar non = '\\u200b\\u0085';\nvar ltrim = RegExp('^' + space + space + '*');\nvar rtrim = RegExp(space + space + '*$');\n\nvar exporter = function (KEY, exec, ALIAS) {\n  var exp = {};\n  var FORCE = fails(function () {\n    return !!spaces[KEY]() || non[KEY]() != non;\n  });\n  var fn = exp[KEY] = FORCE ? exec(trim) : spaces[KEY];\n  if (ALIAS) exp[ALIAS] = fn;\n  $export($export.P + $export.F * FORCE, 'String', exp);\n};\n\n// 1 -> String#trimLeft\n// 2 -> String#trimRight\n// 3 -> String#trim\nvar trim = exporter.trim = function (string, TYPE) {\n  string = String(defined(string));\n  if (TYPE & 1) string = string.replace(ltrim, '');\n  if (TYPE & 2) string = string.replace(rtrim, '');\n  return string;\n};\n\nmodule.exports = exporter;\n","'use strict';\nvar global = require('./_global');\nvar has = require('./_has');\nvar cof = require('./_cof');\nvar inheritIfRequired = require('./_inherit-if-required');\nvar toPrimitive = require('./_to-primitive');\nvar fails = require('./_fails');\nvar gOPN = require('./_object-gopn').f;\nvar gOPD = require('./_object-gopd').f;\nvar dP = require('./_object-dp').f;\nvar $trim = require('./_string-trim').trim;\nvar NUMBER = 'Number';\nvar $Number = global[NUMBER];\nvar Base = $Number;\nvar proto = $Number.prototype;\n// Opera ~12 has broken Object#toString\nvar BROKEN_COF = cof(require('./_object-create')(proto)) == NUMBER;\nvar TRIM = 'trim' in String.prototype;\n\n// 7.1.3 ToNumber(argument)\nvar toNumber = function (argument) {\n  var it = toPrimitive(argument, false);\n  if (typeof it == 'string' && it.length > 2) {\n    it = TRIM ? it.trim() : $trim(it, 3);\n    var first = it.charCodeAt(0);\n    var third, radix, maxCode;\n    if (first === 43 || first === 45) {\n      third = it.charCodeAt(2);\n      if (third === 88 || third === 120) return NaN; // Number('+0x1') should be NaN, old V8 fix\n    } else if (first === 48) {\n      switch (it.charCodeAt(1)) {\n        case 66: case 98: radix = 2; maxCode = 49; break; // fast equal /^0b[01]+$/i\n        case 79: case 111: radix = 8; maxCode = 55; break; // fast equal /^0o[0-7]+$/i\n        default: return +it;\n      }\n      for (var digits = it.slice(2), i = 0, l = digits.length, code; i < l; i++) {\n        code = digits.charCodeAt(i);\n        // parseInt parses a string to a first unavailable symbol\n        // but ToNumber should return NaN if a string contains unavailable symbols\n        if (code < 48 || code > maxCode) return NaN;\n      } return parseInt(digits, radix);\n    }\n  } return +it;\n};\n\nif (!$Number(' 0o1') || !$Number('0b1') || $Number('+0x1')) {\n  $Number = function Number(value) {\n    var it = arguments.length < 1 ? 0 : value;\n    var that = this;\n    return that instanceof $Number\n      // check on 1..constructor(foo) case\n      && (BROKEN_COF ? fails(function () { proto.valueOf.call(that); }) : cof(that) != NUMBER)\n        ? inheritIfRequired(new Base(toNumber(it)), that, $Number) : toNumber(it);\n  };\n  for (var keys = require('./_descriptors') ? gOPN(Base) : (\n    // ES3:\n    'MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,' +\n    // ES6 (in case, if modules with ES6 Number statics required before):\n    'EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,' +\n    'MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger'\n  ).split(','), j = 0, key; keys.length > j; j++) {\n    if (has(Base, key = keys[j]) && !has($Number, key)) {\n      dP($Number, key, gOPD(Base, key));\n    }\n  }\n  $Number.prototype = proto;\n  proto.constructor = $Number;\n  require('./_redefine')(global, NUMBER, $Number);\n}\n"],"sourceRoot":""}